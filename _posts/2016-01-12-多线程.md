---
layout: post
title: '多线程'
subtitle: '多线程'
date: 2016-01-12
categories: 技术
cover: 
tags: 逆向
---


## 面试题

#### （一）：线程和进程的关系和区别
* 线程定义
    * **线程是进程的基本执行单元**，一个进程的所有任务都在线程中执行
    * 进程要想执行任务，必须得有线程，进程至少要有一条线程
    * 程序启动会默认开启一条线程，这条线程被称为主线程或 UI 线程
* 进程定义
    * 进程是指在系统中正在运行的一个应用程序
    * **每个进程之间是独立的**，每个进程均运行在其专用的且受保护的内存
* 进程与线程的区别
    * 地址空间：**同一进程的线程共享本进程的地址空间，而进程之间则是独立的地址空间**。
    * 资源拥有：**同一进程内的线程共享本进程的资源如内存、I/O、cpu等，但是进程之间的资源是独立的**。
    * 一个进程崩溃后，在保护模式下不会对其他进程产生影响，但是一个线程崩溃整个进程都死掉。所以多进程要比多线程健壮。
    * 进程切换时，消耗的资源大，效率高。所以涉及到频繁的切换时，使用线程要好于进程。同样如果要求同时进行并且又要共享某些变量的并发操作，只能用线程不能用进程
    * 执行过程：每个独立的进程有一个程序运行的入口、顺序执行序列和程序入口。但是线程不能独立执行，必须依存在应用程序中，由应用程序提供多个线程执行控制。
    * 线程是处理器调度的基本单位，但是进程不是。

#### （二）：多线程的意义

* 优点
  * 能适当提高程序的执行效率
  * 能适当提高资源的利用率（CPU，内存）
  * 线程上的任务执行完成后，线程会自动销毁
* 缺点
   * 开启线程需要占用一定的内存空间（默认情况下，每一个线程都占 512 KB）
   * 如果开启大量的线程，会占用大量的内存空间，降低程序的性能
   * 线程越多，CPU 在调用线程上的开销就越大
   * 程序设计更加复杂，比如线程间的通信、多线程的数据共享

