I"•7<h3 id="å…³äºstringçš„æ€è€ƒ">å…³äºStringçš„æ€è€ƒ</h3>

<ul>
  <li>1ä¸ªStringå˜é‡å ç”¨å¤šå°‘å†…å­˜?</li>
  <li>ä¸‹é¢2ä¸ªStringå˜é‡ï¼Œåº•å±‚å­˜å‚¨æœ‰ä»€ä¹ˆä¸åŒ?</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var str1 = "0123456789"
var str2 = "0123456789ABCDEF"
</code></pre></div></div>

<ul>
  <li>å¦‚æœå¯¹Stringè¿›è¡Œæ‹¼æ¥æ“ä½œï¼Œ Stringå˜é‡çš„å­˜å‚¨ä¼šå‘ç”Ÿä»€ä¹ˆå˜åŒ–?</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>str1.append("ABCDE")
str1.append("F")
str2.append("G")
</code></pre></div></div>

<ul>
  <li><a href="https://www.ascii-code.com/">ASCIIç è¡¨</a></li>
  <li>å†…å­˜åœ°å€ä»ä½åˆ°é«˜</li>
</ul>

<table>
  <thead>
    <tr>
      <th style="text-align: center">ä»£ç åŒº</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">å¸¸é‡åŒº</td>
    </tr>
    <tr>
      <td style="text-align: center">å…¨å±€åŒºï¼ˆæ•°æ®æ®µï¼‰</td>
    </tr>
    <tr>
      <td style="text-align: center">å †ç©ºé—´</td>
    </tr>
    <tr>
      <td style="text-align: center">æ ˆç©ºé—´</td>
    </tr>
    <tr>
      <td style="text-align: center">åŠ¨æ€åº“</td>
    </tr>
  </tbody>
</table>

<hr />

<h3 id="ä»ç¼–ç åˆ°å¯åŠ¨app">ä»ç¼–ç åˆ°å¯åŠ¨APP</h3>

<p><img src="https://fuqionglin-blog.oss-cn-qingdao.aliyuncs.com/Swift5/000033.jpg" alt="" /></p>

<hr />

<h3 id="dyld_stub_binder">dyld_stub_binder</h3>

<ul>
  <li>ç¬¦å·çš„å»¶è¿Ÿç»‘å®šé€šè¿‡dyld_stub_binderå®Œæˆ</li>
  <li>jmpq *0xb31(%rip)æ ¼å¼çš„æ±‡ç¼–æŒ‡ä»¤
    <ul>
      <li>å ç”¨6ä¸ªå­—èŠ‚</li>
    </ul>
  </li>
</ul>

<p><img src="https://fuqionglin-blog.oss-cn-qingdao.aliyuncs.com/Swift5/000034.jpg" alt="" /></p>

<hr />

<h3 id="å…³äºarrayçš„æ€è€ƒ">å…³äºArrayçš„æ€è€ƒ</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public struct Array&lt;Element&gt;
var arr = [1, 2, 3, 4]
</code></pre></div></div>

<ul>
  <li>1ä¸ªArrayå˜é‡å ç”¨å¤šå°‘å†…å­˜? n æ•°ç»„ä¸­çš„æ•°æ®å­˜æ”¾åœ¨å“ªé‡Œ?</li>
</ul>

<p><img src="https://fuqionglin-blog.oss-cn-qingdao.aliyuncs.com/Swift5/000035.jpg" alt="" /></p>

<hr />

<h3 id="æº¢å‡ºè¿ç®—ç¬¦overflow-operator">æº¢å‡ºè¿ç®—ç¬¦(Overflow Operator)</h3>

<ul>
  <li>Swiftçš„ç®—æ•°è¿ç®—ç¬¦å‡ºç°æº¢å‡ºæ—¶ä¼šæŠ›å‡ºè¿è¡Œæ—¶é”™è¯¯</li>
  <li>Swiftæœ‰æº¢å‡ºè¿ç®—ç¬¦(<code class="language-plaintext highlighter-rouge">&amp;+ã€&amp;-ã€&amp;*</code>)ï¼Œç”¨æ¥æ”¯æŒæº¢å‡ºè¿ç®—</li>
</ul>

<p><img src="https://fuqionglin-blog.oss-cn-qingdao.aliyuncs.com/Swift5/000036.jpg" alt="" /></p>

<hr />

<h3 id="è¿ç®—ç¬¦é‡è½½operator-overload">è¿ç®—ç¬¦é‡è½½(Operator Overload)</h3>

<ul>
  <li>ç±»ã€ç»“æ„ä½“ã€æšä¸¾å¯ä»¥ä¸ºç°æœ‰çš„è¿ç®—ç¬¦æä¾›è‡ªå®šä¹‰çš„å®ç°ï¼Œè¿™ä¸ªæ“ä½œå«åš:è¿ç®—ç¬¦é‡è½½</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>struct Point {
    var x: Int, y: Int
}

func + (p1: Point, p2: Point) -&gt; Point {
    Point(x: p1.x + p2.x, y: p1.y + p2.y)
}

let p = Point(x: 10, y: 20) + Point(x: 11, y: 22)
print(p) // Point(x: 21, y: 42)

struct Point {
    var x: Int, y: Int
    static func + (p1: Point, p2: Point) -&gt; Point {
        Point(x: p1.x + p2.x, y: p1.y + p2.y)
    }
}
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>static func + (p1: Point, p2: Point) -&gt; Point {
    Point(x: p1.x + p2.x, y: p1.y + p2.y)
}

static func - (p1: Point, p2: Point) -&gt; Point {
    Point(x: p1.x - p2.x, y: p1.y - p2.y)
}

static prefix func - (p: Point) -&gt; Point {
    Point(x: -p.x, y: -p.y)
}

static func += (p1: inout Point, p2: Point) {
    p1 = p1 + p2
}

static prefix func ++ (p: inout Point) -&gt; Point {
    p += Point(x: 1, y: 1)
    return p
}

static postfix func ++ (p: inout Point) -&gt; Point {
    let tmp = p
    p += Point(x: 1, y: 1)
    return tmp
}

static func == (p1: Point, p2: Point) -&gt; Bool {
    (p1.x == p2.x) &amp;&amp; (p1.y == p2.y)
}
</code></pre></div></div>

<hr />

<h3 id="equatable">Equatable</h3>

<ul>
  <li>è¦æƒ³å¾—çŸ¥2ä¸ªå®ä¾‹æ˜¯å¦ç­‰ä»·ï¼Œä¸€èˆ¬åšæ³•æ˜¯éµå®ˆ<code class="language-plaintext highlighter-rouge">Equatable</code> åè®®ï¼Œé‡è½½== è¿ç®—ç¬¦
    <ul>
      <li>ä¸æ­¤åŒæ—¶ï¼Œç­‰ä»·äºé‡è½½äº† != è¿ç®—ç¬¦</li>
    </ul>
  </li>
  <li>Swiftä¸ºä»¥ä¸‹ç±»å‹æä¾›é»˜è®¤çš„<code class="language-plaintext highlighter-rouge">Equatable</code> å®ç°
    <ul>
      <li>æ²¡æœ‰å…³è”ç±»å‹çš„æšä¸¾</li>
      <li>åªæ‹¥æœ‰éµå®ˆ <code class="language-plaintext highlighter-rouge">Equatable</code> åè®®å…³è”ç±»å‹çš„æšä¸¾</li>
      <li>åªæ‹¥æœ‰éµå®ˆ <code class="language-plaintext highlighter-rouge">Equatable</code> åè®®å­˜å‚¨å±æ€§çš„ç»“æ„ä½“</li>
    </ul>
  </li>
  <li>å¼•ç”¨ç±»å‹æ¯”è¾ƒå­˜å‚¨çš„åœ°å€å€¼æ˜¯å¦ç›¸ç­‰(æ˜¯å¦å¼•ç”¨ç€åŒä¸€ä¸ªå¯¹è±¡)ï¼Œä½¿ç”¨æ’ç­‰è¿ç®—ç¬¦=== ã€!==</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>struct Point : Equatable {
    var x: Int, y: Int
}
var p1 = Point(x: 10, y: 20)
var p2 = Point(x: 11, y: 22)
print(p1 == p2) // false
print(p1 != p2) // true
</code></pre></div></div>

<hr />

<h3 id="comparable">Comparable</h3>

<ul>
  <li>è¦æƒ³æ¯”è¾ƒ2ä¸ªå®ä¾‹çš„å¤§å°ï¼Œä¸€èˆ¬åšæ³•æ˜¯:
    <ul>
      <li>éµå®ˆ Comparable åè®®</li>
      <li>é‡è½½ç›¸åº”çš„è¿ç®—ç¬¦</li>
    </ul>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// scoreå¤§çš„æ¯”è¾ƒå¤§ï¼Œè‹¥scoreç›¸ç­‰ï¼Œageå°çš„æ¯”è¾ƒå¤§
struct Student : Comparable {
    var age: Int
    var score: Int
    init(score: Int, age: Int) {
        self.score = score
        self.age = age
    }
    static func &lt; (lhs: Student, rhs: Student) -&gt; Bool {
        (lhs.score &lt; rhs.score) || (lhs.score == rhs.score &amp;&amp; lhs.age &gt; rhs.age)
    }
    static func &gt; (lhs: Student, rhs: Student) -&gt; Bool {
        (lhs.score &gt; rhs.score) || (lhs.score == rhs.score &amp;&amp; lhs.age &lt; rhs.age)
    }
    static func &lt;= (lhs: Student, rhs: Student) -&gt; Bool {
        !(lhs &gt; rhs)
    }
    static func &gt;= (lhs: Student, rhs: Student) -&gt; Bool {
        !(lhs &lt; rhs)
    }
}


var stu1 = Student(score: 100, age: 20)
var stu2 = Student(score: 98, age: 18)
var stu3 = Student(score: 100, age: 20)
print(stu1 &gt; stu2) // true
print(stu1 &gt;= stu2) // true
print(stu1 &gt;= stu3) // true
print(stu1 &lt;= stu3) // true
print(stu2 &lt; stu1) // true
print(stu2 &lt;= stu1) // true
</code></pre></div></div>

<hr />

<h3 id="è‡ªå®šä¹‰è¿ç®—ç¬¦custom-operator">è‡ªå®šä¹‰è¿ç®—ç¬¦(Custom Operator)</h3>

<ul>
  <li>å¯ä»¥è‡ªå®šä¹‰æ–°çš„è¿ç®—ç¬¦:åœ¨å…¨å±€ä½œç”¨åŸŸä½¿ç”¨operatorè¿›è¡Œå£°æ˜</li>
  <li>Appleæ–‡æ¡£å‚è€ƒ: <a href="https://developer.apple.com/documentation/swift/swift_standard_library/operator_declarations">é“¾æ¥1</a> <a href="https://docs.swift.org/swift- book/ReferenceManual/Declarations.html#ID380">é“¾æ¥2</a></li>
  <li>phttps://docs.swift.org/swift- book/ReferenceManual/Declarations.html#ID380</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>prefix operator å‰ç¼€è¿ç®—ç¬¦
postfix operator åç¼€è¿ç®—ç¬¦
infix operator ä¸­ç¼€è¿ç®—ç¬¦ : ä¼˜å…ˆçº§ç»„

precedencegroup ä¼˜å…ˆçº§ç»„ {
    associativity: ç»“åˆæ€§(left\right\none)
    higherThan: æ¯”è°çš„ä¼˜å…ˆçº§é«˜
    lowerThan: æ¯”è°çš„ä¼˜å…ˆçº§ä½
    assignment: trueä»£è¡¨åœ¨å¯é€‰é“¾æ“ä½œä¸­æ‹¥æœ‰è·Ÿèµ‹å€¼è¿ç®—ç¬¦ä¸€æ ·çš„ä¼˜å…ˆçº§
}

prefix operator +++
infix operator +- : PlusMinusPrecedence
precedencegroup PlusMinusPrecedence {
    associativity: none
    higherThan: AdditionPrecedence
    lowerThan: MultiplicationPrecedence
    assignment: true
}
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>struct Point {
    var x: Int, y: Int
    static prefix func +++ (point: inout Point) -&gt; Point {
        point = Point(x: point.x + point.x, y: point.y + point.y)
        return point
    }
    static func +- (left: Point, right: Point) -&gt; Point {
        return Point(x: left.x + right.x, y: left.y - right.y)
    }
    static func +- (left: Point?, right: Point) -&gt; Point {
        print("+-")
        return Point(x: left?.x ?? 0 + right.x, y: left?.y ?? 0 - right.y) }
}

struct Person {
    var point: Point
}
var person: Person? = nil
person?.point +- Point(x: 10, y: 20)
</code></pre></div></div>

<hr />

<h3 id="æ‰©å±•extension">æ‰©å±•(Extension)</h3>

<ul>
  <li>Swiftä¸­çš„æ‰©å±•ï¼Œæœ‰ç‚¹ç±»ä¼¼äºOCä¸­çš„åˆ†ç±»(Category)</li>
  <li>æ‰©å±•å¯ä»¥ä¸ºæšä¸¾ã€ç»“æ„ä½“ã€ç±»ã€åè®®æ·»åŠ æ–°åŠŸèƒ½</li>
  <li>å¯ä»¥æ·»åŠ æ–¹æ³•ã€è®¡ç®—å±æ€§ã€ä¸‹æ ‡ã€(ä¾¿æ·)åˆå§‹åŒ–å™¨ã€åµŒå¥—ç±»å‹ã€åè®®ç­‰ç­‰</li>
  <li>æ‰©å±•ä¸èƒ½åŠåˆ°çš„äº‹æƒ…
    <ul>
      <li>ä¸èƒ½è¦†ç›–åŸæœ‰çš„åŠŸèƒ½</li>
      <li>ä¸èƒ½æ·»åŠ å­˜å‚¨å±æ€§ï¼Œä¸èƒ½å‘å·²æœ‰çš„å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨</li>
      <li>ä¸èƒ½æ·»åŠ çˆ¶ç±»</li>
      <li>ä¸èƒ½æ·»åŠ æŒ‡å®šåˆå§‹åŒ–å™¨ï¼Œä¸èƒ½æ·»åŠ ååˆå§‹åŒ–å™¨</li>
      <li>â€¦</li>
    </ul>
  </li>
</ul>

<hr />

<h3 id="è®¡ç®—å±æ€§ä¸‹æ ‡æ–¹æ³•åµŒå¥—ç±»å‹">è®¡ç®—å±æ€§ã€ä¸‹æ ‡ã€æ–¹æ³•ã€åµŒå¥—ç±»å‹</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>extension Double {
    var km: Double { self * 1_000.0 }
    var m: Double { self }
    var dm: Double { self / 10.0 }
    var cm: Double { self / 100.0 }
    var mm: Double { self / 1_000.0 }
}

extension Array {
    subscript(nullable idx: Int) -&gt; Element? {
        if (startIndex..&lt;endIndex).contains(idx) {
            return self[idx]
        }
        return nil
    }
}

extension Int {
    func repetitions(task: () -&gt; Void) {
        for _ in 0..&lt;self { task() }
    }
    mutating func square() -&gt; Int {
        self = self * self
        return self
    }
    enum Kind { case negative, zero, positive }
    var kind: Kind {
        switch self {
        case 0: return .zero
        case let x where x &gt; 0: return .positive
        default: return .negative
        }
    }
    subscript(digitIndex: Int) -&gt; Int {
        var decimalBase = 1
        for _ in 0..&lt;digitIndex { decimalBase *= 10 }
        return (self / decimalBase) % 10
    }
}
</code></pre></div></div>

<hr />

<h3 id="åè®®åˆå§‹åŒ–å™¨">åè®®ã€åˆå§‹åŒ–å™¨</h3>

<ul>
  <li>å¦‚æœå¸Œæœ›è‡ªå®šä¹‰åˆå§‹åŒ–å™¨çš„åŒæ—¶ï¼Œç¼–è¯‘å™¨ä¹Ÿèƒ½å¤Ÿç”Ÿæˆé»˜è®¤åˆå§‹åŒ–å™¨
    <ul>
      <li>å¯ä»¥åœ¨æ‰©å±•ä¸­ç¼–å†™è‡ªå®šä¹‰åˆå§‹åŒ–å™¨</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">required</code>åˆå§‹åŒ–å™¨ä¹Ÿä¸èƒ½å†™åœ¨æ‰©å±•ä¸­</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Person {
    var age: Int
    var name: String
    init(age: Int, name: String) {
        self.age = age
        self.name = name
    }
}
extension Person : Equatable {
    static func == (left: Person, right: Person) -&gt; Bool {
        left.age == right.age &amp;&amp; left.name == right.name
    }
    convenience init() {
        self.init(age: 0, name: "")
    }
}

struct Point {
    var x: Int = 0
    var y: Int = 0
}
extension Point {
    init(_ point: Point) {
        self.init(x: point.x, y: point.y)
    }
}
var p1 = Point()
var p2 = Point(x: 10)
var p3 = Point(y: 20)
var p4 = Point(x: 10, y: 20)
var p5 = Point(p4)
</code></pre></div></div>

<hr />

<h3 id="åè®®">åè®®</h3>

<ul>
  <li>å¦‚æœä¸€ä¸ªç±»å‹å·²ç»å®ç°äº†åè®®çš„æ‰€æœ‰è¦æ±‚ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å£°æ˜å®ƒéµå®ˆäº†è¿™ä¸ªåè®®
    <ul>
      <li>å¯ä»¥é€šè¿‡æ‰©å±•æ¥è®©å®ƒéµå®ˆè¿™ä¸ªåè®®</li>
    </ul>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>protocol TestProtocol {
    func test()
}
class TestClass {
    func test() {
        print("test")
    }
}
extension TestClass : TestProtocol {}
</code></pre></div></div>

<ul>
  <li>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦ä¸ºå¥‡æ•°?</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func isOdd&lt;T: BinaryInteger&gt;(_ i: T) -&gt; Bool {
    i % 2 != 0
}

extension BinaryInteger {
    func isOdd() -&gt; Bool { self % 2 != 0 }
}
</code></pre></div></div>

<ul>
  <li>æ‰©å±•å¯ä»¥ç»™åè®®æä¾›é»˜è®¤å®ç°ï¼Œä¹Ÿé—´æ¥å®ç°ã€å¯é€‰åè®®ã€çš„æ•ˆæœ</li>
  <li>æ‰©å±•å¯ä»¥ç»™åè®®æ‰©å……ã€åè®®ä¸­ä»æœªå£°æ˜è¿‡çš„æ–¹æ³•ã€</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>protocol TestProtocol {
    func test1()
}
extension TestProtocol {
    func test1() {
        print("TestProtocol test1")
    }
    func test2() {
        print("TestProtocol test2")
    }
}


class TestClass : TestProtocol {}
var cls = TestClass()
cls.test1() // TestProtocol test1
cls.test2() // TestProtocol test2
var cls2: TestProtocol = TestClass()
cls2.test1() // TestProtocol test1
cls2.test2() // TestProtocol test2



class TestClass : TestProtocol {
    func test1() { print("TestClass test1") }
    func test2() { print("TestClass test2") }
}
var cls = TestClass()
cls.test1() // TestClass test1
cls.test2() // TestClass test2
var cls2: TestProtocol = TestClass()
cls2.test1() // TestClass test1
cls2.test2() // TestProtocol test2
</code></pre></div></div>

<hr />

<h3 id="æ³›å‹">æ³›å‹</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Stack&lt;E&gt; {
    var elements = [E]()
    func push(_ element: E) {
        elements.append(element) }
    func pop() -&gt; E { elements.removeLast() }
    func size() -&gt; Int { elements.count } }
// æ‰©å±•ä¸­ä¾ç„¶å¯ä»¥ä½¿ç”¨åŸç±»å‹ä¸­çš„æ³›å‹ç±»å‹
extension Stack {
    func top() -&gt; E { elements.last! }
}
// ç¬¦åˆæ¡ä»¶æ‰æ‰©å±•
extension Stack : Equatable where E : Equatable {
    static func == (left: Stack, right: Stack) -&gt; Bool {
        left.elements == right.elements
    }
}
</code></pre></div></div>

:ET